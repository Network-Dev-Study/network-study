# 트랜스포트 계층 기능의 발전 - QUIC

TCP와 함께 제공되는 특정 기능들을 원하지 않거나 다른 서비스를 원하는 경우

애플리케이션 설계자는 애플리케이션 계층에 항상 ‘자신의 프로토콜을 확장’할 수 있다.

이것이 QUIC 프로토콜에서 취한 접근 방식이다.

특히 보안 HTTP를 위한 트랜스포트 계층 서비스의 성능을 향상하기 위해 처음부터 새롭게 설계되었다.

아래 그림은 (a)전통적인 보안 HTTP프로토콜 스택이고 (b)보안 QUIC기반 HTTP/3 프로토콜 스택이다.

![Untitled](https://user-images.githubusercontent.com/86337233/211638914-123c4f6e-d1ce-4ec3-a88c-66785ab4a046.png)

QUIC의 주요 기능은 다음과 같다.

- 연결 지향적이고 안전함

  종단 간의 핸드셰이크가 필요하다.

  연결 상태의 두 부분은 출발지와 목적지 ID로 모든 QUIC 패킷은 암호화 되어 있고 TCP 연결을 설정 후 TLS를 연결하는 a보다 더 빠른 설정을 제공한다.

- 스트림
  단일 QUIC연결을 통해 여러 애플리케이션 레벨의 ‘스트림’들을 다중화 할 수 있으며
  QUIC 연결이 설정되면 새 스트림을 빠르게 추가할 수 있다.
  스트림은 2개의 QUIC 종단 간에 데이터를 순서대로 안정적으로 전달하기 위한 추상화다.
  HTTP/3의 컨텍스트에는 웹 페이지의 각 개체에 대해 다른 스트림이 있다.
  각 연결에는 연결 ID가 있고 연결 내의 각 스트림에는 스트림 ID가 있다.
  두 ID는 모두 QUIC 패킷 헤더에 포함될 수 있다.
  여러 스트림의 데이터는 UDP를 통해 전달되는 단일 QUIC 세그먼트 내에 포함될 수 있다.
- 신뢰적이고 TCP친화적인 혼잡 제어 데이터 전송
  위 그림 b에서 볼 수 있듯이, QUIC는 각 QUIC 스트림에 대해 독립적으로 신뢰적인 데이터 전송을 제공한다.
  아래 그림의 a는 HTTP/1.1이 단일 TCP연결을 통해 여러 HTTP 요청을 보내는 경우를 보여준다.
  TCP는 신뢰적이고 순서대로 바이트 전달을 제공하므로 여러 HTTP 요청에 대해 순서대로 전달되어야 한다.
  그래서 손실된 바이트가 있다면 나머지 요청들은 재전송되어 TCP가 올바르게 수신할 때 까지 전달 될 수 없다.
  이 문제느 앞서 본 HOL차단 문제다.
  QUIC는 스트림 별로 신뢰적이고 순서대로 전달하기 때문에 손실된 UDP 세그먼트는 해당 세그먼트에서 데이터가 전달된 스트림에서만 영향을 준다.
  다른 스트림의 HTTP메시지는 계속 수신되어 애플리케이션에 전달될 수 있다.
  그리고 QUIC의 혼잡 제어는 TCP 리노 프로토콜을 약간 수정한 TCP 뉴리노를 기반으로 한다.

![Alt text](<../QUIC 마지막 그림.jpg>)
